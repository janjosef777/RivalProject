(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,a){},150:function(e,t,a){e.exports=a.p+"static/media/arrow.27855fc6.png"},175:function(e,t,a){e.exports=a(354)},180:function(e,t,a){},190:function(e,t,a){},327:function(e,t,a){},328:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){},354:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(23),s=a.n(r),l=(a(180),a(38)),o=a(49),c=a(45),d=a(13),u=a(14),m=a(16),p=a(15),h=a(17),g=a(6),b=a(363),f=a(364),v=a(365),E=a(366),j=(a(112),a(63)),O=a.n(j),C=a(34),k=(a(83),a(150)),y=a.n(k),S=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"landingpage-wrapper"},i.a.createElement("h1",null,"Welcome to the scratch & win card manager"),i.a.createElement("h3",null,"Login and get started on campaign creation!")),i.a.createElement("img",{src:y.a,alt:"arrow",className:"home-arrow"}))}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={isLoggedIn:!1},a.checkToken=a.checkToken.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"checkToken",value:function(){var e=this,t=window.sessionStorage.getItem("token");console.log(t),null!==t?this.setState({isLoggedIn:!0},function(){console.log(e.state.isLoggedIn)}):this.setState({isLoggedIn:!1},function(){console.log(e.state.isLoggedIn)})}},{key:"componentDidMount",value:function(){this.checkToken()}},{key:"render",value:function(){var e=!!this.props.invertCondition,t=(this.props.gotoLogin,!!this.props.renderNav);return this.state.isLoggedIn==!e?this.props.children:t?i.a.createElement("div",null,i.a.createElement(A,null),i.a.createElement(S,null)):null}}]),t}(i.a.Component),x=a(33),I=a(359),P=a(360),N=a(361),D=a(362);function T(){var e=Object(C.a)(["\n    background: #E8542A;\n    padding: 10px 25px;\n    border: #E8542A 1px solid;\n    border-radius: 5px;\n    color: #fff;\n    text-decoration: none;\n    &:hover { \n        background: #222;\n        color: #fff;\n        text-decoration: none;\n    }\n"]);return T=function(){return e},e}var R=x.a.a(T()),A=function(){return i.a.createElement("div",null,i.a.createElement(I.a,null,i.a.createElement(P.a,null,i.a.createElement("img",{src:O.a,className:"nav-logo"})),i.a.createElement(N.a,{navbar:!0},i.a.createElement(w,{invertCondition:!0},i.a.createElement(R,{className:"primary-button",href:"/login"},"Login")),i.a.createElement(w,null,i.a.createElement(D.a,{className:"SingleLink"},i.a.createElement(l.b,{to:"/logout"},"LogOut"))))))},_=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).renderRedirect=function(){if(a.state.redirect)return i.a.createElement(o.a,{to:"/"})},a.state={username:"",password:"",redirect:!1},a.handleUsername=a.handleUsername.bind(Object(g.a)(Object(g.a)(a))),a.handlePassword=a.handlePassword.bind(Object(g.a)(Object(g.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleSubmit",value:function(){var e=this;fetch("api/auth",{method:"POST",body:JSON.stringify({username:this.state.username,password:this.state.password}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){403==t.status?window.alert("Incorrect Username/Password. Please try again"):(sessionStorage.setItem("token",t.token),e.setState({redirect:!0}))}).catch(function(e){console.error(e)})}},{key:"logUserIn",value:function(e){console.log(e)}},{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){var e;return i.a.createElement("div",null,i.a.createElement(A,null),i.a.createElement("div",{className:"loginPage"},this.renderRedirect(),i.a.createElement("div",{className:"loginForm"},i.a.createElement("img",{src:O.a,className:"logoImage"}),i.a.createElement(b.a,null,i.a.createElement(f.a,null,i.a.createElement(v.a,(e={placeholder:"Username...",type:"text",id:"username",value:this.state.username,onChange:this.handleUsername},Object(c.a)(e,"placeholder","Username"),Object(c.a)(e,"name","username"),e))),i.a.createElement(f.a,null,i.a.createElement(v.a,Object(c.a)({placeholder:"Password...",type:"password",value:this.state.password,onChange:this.handlePassword,name:"password",id:"password"},"placeholder","Password"))),i.a.createElement(E.a,{className:"login-btn",onClick:this.handleSubmit},"Login")))))}}]),t}(n.Component),F=a(173),z=a(109),L=(a(190),a(169)),U=a.n(L),B=a(171),V=a.n(B),H=a(172),q=a.n(H),M=a(170),W=a.n(M),J=a(1),X=a(76),$=a.n(X),G=a(65),Q=a.n(G),Y=a(8),K=a(35),Z=a(367),ee=(a(327),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).renderRedirect=function(){if(a.state.redirect)return i.a.createElement(o.a,{to:{pathname:"/campaignview",state:{selectedCampaignId:a.state.id}}})},a.state={id:"",title:"",templateId:null,estimatedParticipants:null,dateNow:(new Date).toLocaleString(),redirect:!1},a.handleTitle=a.handleTitle.bind(Object(g.a)(Object(g.a)(a))),a.handleParticipants=a.handleParticipants.bind(Object(g.a)(Object(g.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(Object(g.a)(a))),a.saveTemplate=a.saveTemplate.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleSubmit",value:function(){var e=this;fetch("api/template/",{method:"POST",headers:{Authorization:"Bearer "+sessionStorage.getItem("token"),"Content-type":"application/json"},body:JSON.stringify({title:null,image:null,size:null})}).then(function(e){return e.json()}).then(function(t){sessionStorage.setItem("token",t.token),e.setState({templateId:t.data.id}),e.saveTemplate()}).catch(function(e){console.error(e)})}},{key:"saveTemplate",value:function(){var e=this;fetch("api/campaigns/",{method:"POST",headers:{Authorization:"Bearer "+sessionStorage.getItem("token"),"Content-type":"application/json"},body:JSON.stringify({name:this.state.title,template:this.state.templateId,hasPrizes:this.state.hasPrizes,estimatedParticipants:this.state.estimatedParticipants,createdAt:this.state.dateNow})}).then(function(e){return e.json()}).then(function(t){sessionStorage.setItem("token",t.token),e.setState({id:t.data.id,redirect:!0})}).catch(function(e){console.error(e)})}},{key:"handleTitle",value:function(e){this.setState({title:e.target.value})}},{key:"handleParticipants",value:function(e){this.setState({estimatedParticipants:e.target.value})}},{key:"render",value:function(){return i.a.createElement("div",{className:"createCampaign"},i.a.createElement("div",{className:"innerDivCreate"},i.a.createElement(E.a,{onClick:this.props.closePopup,className:"cancelButton",close:!0}),i.a.createElement(b.a,{className:"formCreateCampaign"},this.renderRedirect(),i.a.createElement(f.a,null,i.a.createElement(Z.a,{for:"title"},"Campaign Title"),i.a.createElement(v.a,{type:"text",id:"title",value:this.state.title,onChange:this.handleTitle})),i.a.createElement(E.a,{onClick:this.handleSubmit,color:"success"},"Create"))))}}]),t}(n.Component)),te=(a(328),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={deleteId:a.props.deleteId},a.deleteCampaign=a.deleteCampaign.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"deleteCampaign",value:function(){console.log(this.state.deleteId),fetch("api/campaigns/"+this.state.deleteId,{method:"DELETE",headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){sessionStorage.setItem("token",e.token),console.log(e.data),window.location.href="/"}).catch(function(e){console.error(e)})}},{key:"render",value:function(){return i.a.createElement("div",{className:"deleteCampaign"},i.a.createElement("div",{className:"innerDiv"},i.a.createElement(E.a,{onClick:this.props.closePopup,className:"cancelButton",close:!0}),i.a.createElement(b.a,{className:"formDeleteCampaign"},i.a.createElement(Z.a,{for:"delete"},"Are you sure you want to delete this Campaign?"),i.a.createElement(E.a,{onClick:this.deleteCampaign,color:"danger"},"Delete"))))}}]),t}(n.Component)),ae=(a(54),a(81)),ne=a(108),ie=a.n(ne),re=a(168),se=(a(331),a(332),a(64)),le=a.n(se),oe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={hightlight:!1},a.fileInputRef=i.a.createRef(),a.openFileDialog=a.openFileDialog.bind(Object(g.a)(Object(g.a)(a))),a.onFilesAdded=a.onFilesAdded.bind(Object(g.a)(Object(g.a)(a))),a.onDragOver=a.onDragOver.bind(Object(g.a)(Object(g.a)(a))),a.onDragLeave=a.onDragLeave.bind(Object(g.a)(Object(g.a)(a))),a.onDrop=a.onDrop.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"openFileDialog",value:function(){this.props.disabled||this.fileInputRef.current.click()}},{key:"onFilesAdded",value:function(e){if(!this.props.disabled){var t=e.target.files;if(this.props.onFilesAdded){var a=this.fileListToArray(t);this.props.onFilesAdded(a)}}}},{key:"onDragOver",value:function(e){e.preventDefault(),this.props.disabled||this.setState({hightlight:!0})}},{key:"onDragLeave",value:function(){this.setState({hightlight:!1})}},{key:"onDrop",value:function(e){if(e.preventDefault(),!this.props.disabled){var t=e.dataTransfer.files;if(this.props.onFilesAdded){var a=this.fileListToArray(t);this.props.onFilesAdded(a)}this.setState({hightlight:!1})}}},{key:"fileListToArray",value:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e.item(a));return t}},{key:"render",value:function(){return i.a.createElement("div",{className:"Dropzone ".concat(this.state.hightlight?"Highlight":""),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onClick:this.openFileDialog,style:{cursor:this.props.disabled?"default":"pointer"},"data-tip":"Drag and drop image here"},i.a.createElement(le.a,null),i.a.createElement("input",{ref:this.fileInputRef,name:"image",className:"FileInput",type:"file",multiple:!0,onChange:this.onFilesAdded}),i.a.createElement("span",{className:"upload-text"},"+"))}}]),t}(n.Component),ce=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={uploading:!1,uploadProgress:{}},a.uploadFiles=a.uploadFiles.bind(Object(g.a)(Object(g.a)(a))),a.sendRequest=a.sendRequest.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"uploadFiles",value:function(){var e=Object(re.a)(ie.a.mark(function e(t){var a,n=this;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({uploadProgress:{},uploading:!0}),a=[],t.forEach(function(e){a.push(n.sendRequest(e))}),e.prev=3,e.next=6,Promise.all(a);case 6:this.setState({uploading:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this.setState({uploading:!1});case 12:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"sendRequest",value:function(e){var t=this;return new Promise(function(a,n){var i=new XMLHttpRequest;i.upload.addEventListener("progress",function(a){if(a.lengthComputable){var n=Object(ae.a)({},t.state.uploadProgress);n[e.name]={state:"pending",percentage:a.loaded/a.total*100},t.setState({uploadProgress:n})}}),i.upload.addEventListener("load",function(n){var r=Object(ae.a)({},t.state.uploadProgress);r[e.name]={state:"done",percentage:100},t.setState({uploadProgress:r}),a(i.response)}),i.upload.addEventListener("error",function(a){var r=Object(ae.a)({},t.state.uploadProgress);r[e.name]={state:"error",percentage:0},t.setState({uploadProgress:r}),n(i.response)});var r=new FormData;r.append("image",e,e.name),i.onreadystatechange=function(){if(4==i.readyState&&t.props.onUpload){var e=200==i.status?null:{status:i.status,message:i.statusText},a=e?i.responseText:JSON.parse(i.responseText);t.props.onUpload(e,a)}},i.open("POST","api/images"),i.setRequestHeader("Authorization","Bearer "+sessionStorage.getItem("token")),i.send(r)})}},{key:"render",value:function(){return i.a.createElement("div",{className:"Upload"},i.a.createElement("div",{className:"Content"},i.a.createElement("div",null,i.a.createElement(oe,{onFilesAdded:this.uploadFiles,disabled:this.state.uploading}))))}}]),t}(n.Component);function de(){var e=Object(C.a)(["\n    padding: 5px;\n    margin: 5px;\n    border: solid lightgray 1px;\n    border-radius: 5px;\n"]);return de=function(){return e},e}function ue(){var e=Object(C.a)(["\n    margin: 5px;\n"]);return ue=function(){return e},e}function me(){var e=Object(C.a)(["\n    margin: 5px\n    min-height: 150px;\n    border-bottom: 1px dotted #999;\n    display: flex;\n    //align-items: center;\n    padding-top: 10px;\n"]);return me=function(){return e},e}function pe(){var e=Object(C.a)(["\n    padding: 5px;\n    margin: 5px;\n    border: solid lightgray 1px;\n    border-radius: 5px;\n    background-color: white;\n    width: 130px;\n    height: 130px;\n    object-fit: cover;\n"]);return pe=function(){return e},e}var he=x.a.img(pe()),ge=x.a.li(me()),be=(x.a.div(ue()),x.a.div(de())),fe=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"setImage",value:function(e){if("1"===this.props.activeTab)this.props.setState({selectedTemplate_image:e.target.src,selectedTemplate_imageId:e.target.alt});else if("2"===this.props.activeTab){var t=this.props.cardResults;t.push({image:e.target.src,title:"",prize:null}),this.props.setState({results:t})}}},{key:"render",value:function(){return i.a.createElement(he,{src:this.props.imagePath,alt:this.props.imageId,onClick:this.setImage.bind(this)})}}]),t}(n.Component),ve=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={},a.images=[],a.deleteImages=a.deleteImages.bind(Object(g.a)(Object(g.a)(a))),a.fetchImages=a.fetchImages.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log(localStorage.getItem("token")),this.fetchImages()}},{key:"fetchImages",value:function(){var e=this;fetch("api/images",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){console.log(t),sessionStorage.setItem("token",t.token),e.images=t.data,e.props.setState({images:e.images})}).catch(function(e){console.error(e)})}},{key:"onUpload",value:function(e,t){e?console.error(e):(this.images.push(t),this.props.setState({images:this.images}),this.fetchImages())}},{key:"deleteImages",value:function(e,t){var a=this;fetch("api/images/"+e,{method:"DELETE",headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(function(e){var t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")?e.json():e}).then(function(e){if(e.data&&e.data.deleted){console.log(e),sessionStorage.setItem("token",e.token);var n=a.props.images;n.splice(t,1),a.props.setState({images:n})}else console.log(e),alert("unable to delet image: "+e),a.fetchImages()}).catch(function(e){console.error(e)})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("div",{className:"image-list-wrapper"},i.a.createElement("h3",null,"Image Library"),i.a.createElement(ce,{onUpload:this.onUpload.bind(this)})),i.a.createElement("div",null,i.a.createElement("ul",{className:"image-list"},this.props.images.map(function(t,a){return i.a.createElement("li",{key:a},i.a.createElement("button",{onClick:function(n){e.deleteImages(t.id,a)},className:"delete-img"},"X"),i.a.createElement(fe,Object.assign({imagePath:t.path,imageId:t.id},e.props)))}))))}}]),t}(n.Component),Ee=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement("div",{className:"assets-view-wrapper"},i.a.createElement(ve,this.props))}}]),t}(n.Component),je=a(368),Oe=a(369),Ce=a(370),ke=a(371),ye=a(372),Se=a(5),we=a.n(Se);function xe(){var e=Object(C.a)(["\n    object-fit: cover;\n    display: block;\n    margin: 0 auto;\n    margin-top: ","\n    border: ",";\n"]);return xe=function(){return e},e}function Ie(){var e=Object(C.a)(["\n    font-size: 1.2em;\n    text-align: center;\n    padding: ","\n    border-bottom: ",";\n"]);return Ie=function(){return e},e}function Pe(){var e=Object(C.a)(["\n    width: ",";\n    padding-bottom: ",";\n    background-color: ",";\n    border: ",";\n    display: block;\n    margin 0 auto;\n"]);return Pe=function(){return e},e}var Ne=x.a.div(Pe(),function(e){return e.frameWidth+"px"},function(e){return e.framePadding+"px"},function(e){return e.frameColor},function(e){return e.borderStyle}),De=x.a.h1(Ie(),function(e){return e.framePadding+"px"},function(e){return e.borderStyle}),Te=x.a.img(xe(),function(e){return e.framePadding+"px"},function(e){return e.borderStyle}),Re=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleClick=function(e){(a.props.overlay||a.props.cardResults[a.props.selectedIndex])&&(a.setState({editing:!0}),a.setState({titleVal:a.props.titleVal}))},a.handleBlur=function(e){if(a.setState({editing:!1}),a.props.overlay)a.props.setState({selectedTemplate_title:e.target.value});else if(a.props.index){console.log(a.props.cardResults);var t=a.props.cardResults,n=t[a.props.selectedIndex];n.title=e.target.value,t.splice(a.props.selectedIndex,1,n),a.props.setState({cardResults:t})}},a.state={editing:!1,titleVal:a.props.titleVal},a.handleClick=a.handleClick.bind(Object(g.a)(Object(g.a)(a))),a.handleChange=a.handleChange.bind(Object(g.a)(Object(g.a)(a))),a.handleBlur=a.handleBlur.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({titleVal:e.target.value}),this.titleVal=e.target.value}},{key:"render",value:function(){return this.state.editing?i.a.createElement(v.a,{value:this.state.titleVal,onChange:this.handleChange,onBlur:this.handleBlur}):i.a.createElement(De,{framePadding:this.props.framePadding,borderStyle:this.props.borderStyle,onClick:this.handleClick},this.props.titleVal)}}]),t}(i.a.Component),Ae=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;this.props.overlay?(this.titleVal=this.props.selectedTemplate_title,this.imgSrc=this.props.selectedTemplate_image,this.imgAlt="card overlay image"):this.props.index?(this.titleVal=this.props.cardResults[this.props.selectedIndex]?this.props.cardResults[this.props.selectedIndex].title:"",this.imgAlt="card result image",this.imgSrc=this.props.cardResults[this.props.selectedIndex]?this.props.cardResults[this.props.selectedIndex].image:""):(this.titleVal=this.props.selectedTemplate_title,this.imgSrc=this.props.imgSrc,this.imgAlt=this.props.imgAlt);return i.a.createElement(Ne,{frameWidth:this.props.imgWidth+50,framePadding:25,frameColor:"lightgray",borderStyle:"solid black 1px"},this.props.editable?i.a.createElement(Re,Object.assign({},this.props,{titleVal:this.titleVal,framePadding:25,borderStyle:"solid black 1px"})):i.a.createElement(De,Object.assign({},this.props,{titleVal:this.titleVal,framePadding:25,borderStyle:"solid black 1px"}),this.props.selectedTemplate_title),i.a.createElement(Te,Object.assign({},this.props,{width:this.props.imgWidth,height:this.props.imgHeight,src:this.imgSrc,alt:this.imgAlt,onClick:this.props.handleCleared?function(t){return e.props.handleCleared(t)}:void 0,framePadding:25,borderStyle:"solid black 1px"})))}}]),t}(i.a.Component),_e=function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).call(this,e))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return this.props.overlay?i.a.createElement("div",{className:"wrapper"},i.a.createElement(Ae,Object.assign({editable:!0,overlay:!0},this.props,{imgWidth:300,imgHeight:300}))):this.props.index?i.a.createElement("div",{className:"wrapper"},i.a.createElement(Ae,Object.assign({editable:!0,index:!0},this.props,{imgWidth:300,imgHeight:300}))):void 0}}]),t}(n.Component),Fe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setSelectedIndex=function(e){a.props.setState({selectedIndex:e})},a.setSelectedIndex=a.setSelectedIndex.bind(Object(g.a)(Object(g.a)(a))),a.triggerDelete=a.triggerDelete.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"triggerDelete",value:function(e){var t=this.props.cardResults;t.splice(e,1),this.props.setState({cardResults:t})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("ul",{className:"results-list"},this.props.cardResults.map(function(t,a){return i.a.createElement("li",{key:a},i.a.createElement("button",{onClick:function(t){e.triggerDelete(a)},className:"delete-img"},"X"),i.a.createElement(he,{src:t.image,onClick:function(t){e.setSelectedIndex(a)},alt:"Selected Prize Image"}),i.a.createElement("p",null,t.title))})))}}]),t}(n.Component),ze=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).inputUpdate=function(e){a.setState(Object(c.a)({},e.target.id,e.target.value))},a.removePrize=function(e){var t=a.props.idx,n=a.props.cardResults[t];n.prize=null;var i=a.props.cardResults;i.splice(t,1,n),console.log(n),a.props.setState({cardResults:i})},a.state={showForm:!1,name:"",qty:null},a.showForm=a.showForm.bind(Object(g.a)(Object(g.a)(a))),a.saveChanges=a.saveChanges.bind(Object(g.a)(Object(g.a)(a))),a.cancel=a.cancel.bind(Object(g.a)(Object(g.a)(a))),a.inputUpdate=a.inputUpdate.bind(Object(g.a)(Object(g.a)(a))),a.removePrize=a.removePrize.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"showForm",value:function(){this.setState({showForm:!0});var e=this.props.cardResults[this.props.idx].prize;console.log(e),e&&this.setState({name:e.name,qty:e.qty})}},{key:"saveChanges",value:function(){var e=this.props.idx,t={name:this.state.name,qty:this.state.qty},a=this.props.cardResults[e];a.prize=t;var n=this.props.cardResults;n.splice(e,1,a),console.log(a),this.props.setState({cardResults:n}),this.setState({showForm:!1})}},{key:"cancel",value:function(){this.setState({showForm:!1})}},{key:"render",value:function(){return this.props.cardResults[this.props.idx]?this.state.showForm?i.a.createElement("div",null,i.a.createElement(i.a.Fragment,null,"Prize Name: "),i.a.createElement(v.a,{id:"name",value:this.state.name,onChange:this.inputUpdate}),i.a.createElement("br",null),i.a.createElement(i.a.Fragment,null,"Quantity: "),i.a.createElement(v.a,{id:"qty",value:this.state.qty,type:"number",min:"0",onChange:this.inputUpdate}),i.a.createElement("br",null),i.a.createElement(E.a,{onClick:this.saveChanges,style:{backgroundColor:"#E8542A",margin:"5px"}},"Save Changes"),i.a.createElement(E.a,{onClick:this.cancel,color:"secondary"},"Cancel")):this.props.cardResults[this.props.idx].prize?i.a.createElement("div",null,i.a.createElement(i.a.Fragment,null,"Prize Name: "),i.a.createElement(i.a.Fragment,null,this.props.cardResults[this.props.idx].prize.name),i.a.createElement("br",null),i.a.createElement(i.a.Fragment,null,"Quantity: "),i.a.createElement(i.a.Fragment,null,this.props.cardResults[this.props.idx].prize.qty),i.a.createElement("br",null),i.a.createElement(E.a,{onClick:this.showForm,style:{backgroundColor:"#E8542A",margin:"5px"}},"Edit Prize"),i.a.createElement(E.a,{color:"danger",onClick:this.removePrize,style:{margin:"5px"}},"Remove Prize")):i.a.createElement("div",null,i.a.createElement(E.a,{onClick:this.showForm,style:{backgroundColor:"#E8542A",margin:"5px"}},"Add a Prize")):i.a.createElement("div",null)}}]),t}(n.Component),Le=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={},a.toggle=a.toggle.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"toggle",value:function(e){this.props.activeTab!==e&&this.props.setState({activeTab:e})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"wrapper"},i.a.createElement(N.a,{tabs:!0},i.a.createElement(D.a,null,i.a.createElement(je.a,{className:we()({active:"1"===this.props.activeTab}),onClick:function(){e.toggle("1")}},"Overlay Image")),i.a.createElement(D.a,null,i.a.createElement(je.a,{className:we()({active:"2"===this.props.activeTab}),onClick:function(){e.toggle("2")}},"Card Results"))),i.a.createElement(Oe.a,{activeTab:this.props.activeTab},i.a.createElement(Ce.a,{tabId:"1"},i.a.createElement(ke.a,null,i.a.createElement(ye.a,{sm:"12"},i.a.createElement(_e,Object.assign({overlay:!0},this.props))))),i.a.createElement(Ce.a,{tabId:"2"},i.a.createElement(ke.a,null,i.a.createElement(ye.a,{sm:"12"},i.a.createElement(_e,Object.assign({index:!0},this.props)),i.a.createElement(be,null,i.a.createElement(ze,Object.assign({},this.props,{idx:this.props.selectedIndex}))),i.a.createElement(Fe,this.props))))))}}]),t}(n.Component);function Ue(){var e=Object(C.a)(["\npadding: 10px;   \nmargin: 10px;\nmargin-top: 50px;\nborder: 1px solid black;\nborder-radius: 5px;\nbackground-color: #E8542A;\n"]);return Ue=function(){return e},e}var Be=x.a.a(Ue()),Ve=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).renderRedirect=function(){if(a.state.showHomepage)return i.a.createElement(o.a,{to:{pathname:"/"}})},a.viewSummary=function(){a.props.setState({viewSummary:!0})},a.state={showHomepage:!1},a.handleStatusChange=a.handleStatusChange.bind(Object(g.a)(Object(g.a)(a))),a.directToHome=a.directToHome.bind(Object(g.a)(Object(g.a)(a))),a.handleCampaignNameChange=a.handleCampaignNameChange.bind(Object(g.a)(Object(g.a)(a))),a.handleEstimatedPatricipantsChange=a.handleEstimatedPatricipantsChange.bind(Object(g.a)(Object(g.a)(a))),a.saveChanges=a.props.saveChanges.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleCampaignNameChange",value:function(e){this.props.setState({selectedCampaign_name:e.target.value})}},{key:"handleEstimatedPatricipantsChange",value:function(e){this.props.setState({selectedCampaign_estimatedParticipants:e.target.value})}},{key:"handleStatusChange",value:function(e){var t=e.target,a=("checkbox"===t.type?t.checked:t.value)?1:0;this.props.setState({selectedCampaign_isActive:a}),console.log(a)}},{key:"directToHome",value:function(){this.setState({showHomepage:!0})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h2",null,"Campaign Setup"),i.a.createElement("div",{className:"settings-wrapper"},i.a.createElement("div",{className:"campaign-main-info"},this.renderRedirect(),i.a.createElement(Be,{className:"icon back-icon"},i.a.createElement("i",{class:"fas fa-arrow-left",onClick:this.directToHome})),i.a.createElement("div",{className:"input-section"},i.a.createElement("h6",null,"Campaign Name: "),i.a.createElement("input",{type:"text",value:this.props.selectedCampaign_name,onChange:this.handleCampaignNameChange,placeholder:"Campaign Name..."})),i.a.createElement("div",{className:"input-section"},i.a.createElement("h6",null,"Estimated Participants: "),i.a.createElement("input",{type:"text",value:this.props.selectedCampaign_estimatedParticipants,onChange:this.handleEstimatedPatricipantsChange,placeholder:"Estimated Participants..."})),i.a.createElement("div",{class:"input-section onoffswitch","data-tip":"Activate campaign"},i.a.createElement("input",{type:"checkbox",name:"onoffswitch",class:"onoffswitch-checkbox",id:"myonoffswitch",onChange:this.handleStatusChange,checked:this.props.selectedCampaign_isActive}),i.a.createElement("label",{class:"onoffswitch-label",for:"myonoffswitch"},i.a.createElement("span",{class:"onoffswitch-inner"}),i.a.createElement("span",{class:"onoffswitch-switch"})))),i.a.createElement("div",{className:"campaign-main-btns"},i.a.createElement(le.a,null),i.a.createElement(Be,{onClick:this.viewSummary,className:"icon"},i.a.createElement("i",{class:"fas fa-list-alt","data-tip":"Campaign summary"})),i.a.createElement(Be,{href:"api/assignlink/par/1/camp/1",target:"_blank",className:"icon","data-tip":"Demo link"},i.a.createElement("i",{class:"fas fa-link"})),i.a.createElement(Be,{className:"icon",onClick:this.saveChanges},i.a.createElement("i",{class:"fas fa-save"})))))}}]),t}(n.Component),He=a(373),qe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setSelectedIndex=function(e){a.props.setState({selectedIndex:e})},a.setSelectedIndex=a.setSelectedIndex.bind(Object(g.a)(Object(g.a)(a))),a.triggerDelete=a.triggerDelete.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"triggerDelete",value:function(e){var t=this.props.cardResults;t.splice(e,1),this.props.setState({cardResults:t})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return i.a.createElement(He.a,{isOpen:this.props.viewSummary},i.a.createElement("ul",null,this.props.cardResults.map(function(t,a){return i.a.createElement(ge,{key:a},i.a.createElement("button",{style:{margin:"5px"},onClick:function(t){e.triggerDelete(a)},className:"delete-img"},"X"),i.a.createElement(he,{src:t.image,onClick:function(t){e.setSelectedIndex(a)},alt:"Selected Prize Image"}),i.a.createElement(ze,Object.assign({},e.props,{cardResult:t,idx:a})))})),i.a.createElement(E.a,{onClick:function(){return e.props.setState({viewSummary:!1})}},"Close"))}}]),t}(n.Component);function Me(){var e=Object(C.a)(["\n    padding: 10px;   \n    margin: 10px;\n    margin-top: 50px;\n    border: 1px solid black;\n    border-radius: 5px;\n    background-color: red;\n    position: fixed;\n    bottom: 100px;\n    right: 100px;\n    &:hover { \n        background-color: yellow;\n    }\n"]);return Me=function(){return e},e}x.a.a(Me());var We=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={activeTab:"1",images:[],cardResults:[],dateNow:(new Date).toLocaleString(),selectedIndex:null,viewSummary:!1,selectedCampaign_id:a.props.location.state?a.props.location.state.selectedCampaignId:0,selectedCampaign_estimatedParticipants:"",selectedCampaign_isActive:"",selectedCampaign_name:"",selectedCampaign_template:"",selectedCampaign_url:"",selectedTemplate_title:"thanks for participating!",selectedTemplate_image:"",selectedTemplate_imageId:""},a.setState=a.setState.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"loadCampaign",value:function(){var e=this;fetch("api/campaigns/"+this.state.selectedCampaign_id,{method:"GET",headers:{Authorization:"Bearer "+sessionStorage.getItem("token"),"Content-type":"application/json"}}).then(function(e){return e.json()}).then(function(t){sessionStorage.setItem("token",t.token),console.log(t.data),e.setState({selectedCampaign_id:t.data.id,selectedCampaign_estimatedParticipants:t.data.estimatedParticipants,selectedCampaign_isActive:t.data.isActive,selectedCampaign_name:t.data.name,selectedCampaign_template:t.data.template,selectedCampaign_url:t.data.url}),e.loadTemplate()}).catch(function(e){console.error(e)})}},{key:"loadTemplate",value:function(){var e=this;fetch("api/template/"+this.state.selectedCampaign_template,{method:"GET",headers:{Authorization:"Bearer "+sessionStorage.getItem("token"),"Content-type":"application/json"}}).then(function(e){return e.json()}).then(function(t){sessionStorage.setItem("token",t.token),e.setState({selectedTemplate_imageId:t.data.image}),null!=t.data.title&&e.setState({selectedTemplate_title:t.data.title}),e.loadTemplateImage()}).catch(function(e){console.error(e)})}},{key:"loadTemplateImage",value:function(){var e=this;fetch("api/images/"+this.state.selectedTemplate_imageId,{method:"GET",headers:{Authorization:"Bearer "+sessionStorage.getItem("token"),"Content-type":"application/json"}}).then(function(e){return e.json()}).then(function(t){sessionStorage.setItem("token",t.token),null!=t.data.path&&e.setState({selectedTemplate_image:t.data.path})}).catch(function(e){console.error(e)})}},{key:"saveChanges",value:function(){console.log(this.props),window.alert("Changes Saved!")}},{key:"componentDidMount",value:function(){this.loadCampaign()}},{key:"render",value:function(){return this.state.viewSummary?i.a.createElement(qe,Object.assign({},this.state,{setState:this.setState})):i.a.createElement("div",null,i.a.createElement(A,null),i.a.createElement(Ve,Object.assign({saveChanges:this.saveChanges},this.state,{setState:this.setState})),i.a.createElement("div",{className:"content-wrapper"},i.a.createElement("div",{className:"left-wrapper sub-wrapper"},i.a.createElement(Ee,Object.assign({},this.state,{setState:this.setState}))),i.a.createElement("div",{className:"right-wrapper sub-wrapper"},i.a.createElement(Le,Object.assign({},this.state,{setState:this.setState})))))}}]),t}(n.Component),Je=function(e){return e.id},Xe=function(e){return e.value.replace(/(\d{4})-(\d{2})-(\d{2})/,"$3/$2/$1").replace(/T/," - ").replace(/\..+/,"")},$e=function(e){return i.a.createElement(Y.b,Object.assign({formatterComponent:Xe},e))},Ge=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).renderRedirect=function(){if(a.state.showUpdate)return i.a.createElement(o.a,{to:{pathname:"/campaignview",state:{selectedCampaignId:a.state.selectedCampaignId}}})},a.state={popupVisible:!1,activeRow:{},columns:[{name:"name",title:"Campaign"},{name:"createdBy",title:"Created By"},{name:"createdAt",title:"Date Created"},{name:"url",title:"URL"}],dateColumns:["createdAt"],editingStateColumnExtensions:[{columnName:"id",editingEnabled:!1},{columnName:"name",editingEnabled:!1},{columnName:"createdBy",editingEnabled:!1},{columnName:"createdAt",editingEnabled:!1},{columnName:"url",editingEnabled:!1}],campaignItems:[],showCreatePopup:!1,showDeletePopup:!1,showUpdate:!1,deleteId:null,selectedCampaignId:null},a.fetchCampaigns=a.fetchCampaigns.bind(Object(g.a)(Object(g.a)(a))),a.toggleDeletePopup=a.toggleDeletePopup.bind(Object(g.a)(Object(g.a)(a))),a.closePopup=function(){a.setState({popupVisible:!1,activeRow:{}})},a.myUpdate=a.myUpdate.bind(Object(g.a)(Object(g.a)(a))),a.myDelete=a.myDelete.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetchCampaigns()}},{key:"fetchCampaigns",value:function(){var e=this;fetch("api/campaigns",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){sessionStorage.setItem("token",t.token),e.setState({campaignItems:t.data}),console.log(t.data)}).catch(function(e){console.error(e)})}},{key:"toggleCreatePopup",value:function(){this.setState({showCreatePopup:!this.state.showCreatePopup})}},{key:"toggleDeletePopup",value:function(){this.setState({showDeletePopup:!this.state.showDeletePopup})}},{key:"myUpdate",value:function(e){this.setState({selectedCampaignId:e.id,showUpdate:!0})}},{key:"myDelete",value:function(e){console.log(e.id),this.setState({deleteId:e.id,showDeletePopup:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.campaignItems,n=t.columns,r=t.dateColumns,s=(t.editingStateColumnExtensions,t.rows,t.popupVisible),l=t.activeRow,o=function(t){e.myUpdate(t)};return i.a.createElement("div",null,i.a.createElement(A,null),i.a.createElement("div",{className:"Home"},i.a.createElement("h2",null,"Scratch & Win Campaigns"),i.a.createElement("div",{className:"container"},i.a.createElement($.a,null,i.a.createElement(K.a,{rows:a,columns:n,getRowId:Je},i.a.createElement(Y.d,{onCommitChanges:this.commitChanges}),i.a.createElement($e,{for:r}),i.a.createElement(Y.k,{defaultCurrentPage:1,pageSize:4}),i.a.createElement(Y.h,null),i.a.createElement(Q.a,{variant:"fab",color:"primary","aria-label":"add",className:"add-btn",onClick:this.toggleCreatePopup.bind(this)},"+"),i.a.createElement("i",null),this.state.showCreatePopup?i.a.createElement(ee,{closePopup:this.toggleCreatePopup.bind(this)}):null,this.state.showDeletePopup?i.a.createElement(te,{deleteId:this.state.deleteId,closePopup:this.toggleDeletePopup.bind(this)}):null,this.renderRedirect(),i.a.createElement(Y.n,{defaultSorting:[{columnName:"name",direction:"asc"},{columnName:"created_by",direction:"asc"},{columnName:"url",direction:"asc"}]}),i.a.createElement(Y.i,null),i.a.createElement(Y.m,{defaultValue:""}),i.a.createElement(Y.g,null),i.a.createElement(K.d,{rowComponent:function(e){var t=e.row,a=Object(z.a)(e,["row"]);return i.a.createElement(K.d.Row,Object.assign({},a,{onClick:function(){return o(t)},style:{cursor:"pointer"}}))}}),i.a.createElement(K.g,{showSortingControls:!0}),i.a.createElement(K.f,null),i.a.createElement(K.e,{width:170,cellComponent:function(t){var a=t.children,n=t.row,r=Object(z.a)(t,["children","row"]);return i.a.createElement(K.e.Cell,Object.assign({row:n},r),a,i.a.createElement(K.e.Command,{id:"custom",class:"fas fa-edit",onExecute:function(){o(n)}}),i.a.createElement(K.e.Command,{id:"custom",class:"fas fa-trash",onExecute:function(){!function(t){e.myDelete(t)}(n)}}))}}),i.a.createElement(J.f,{name:"tableColumns",computed:function(e){var t=e.tableColumns;return[].concat(Object(F.a)(t.filter(function(e){return e.type!==K.e.COLUMN_TYPE})),[{key:"editCommand",type:K.e.COLUMN_TYPE,width:140}])}}),i.a.createElement(K.h,null),i.a.createElement(K.c,null),i.a.createElement(K.b,null)),i.a.createElement(U.a,{onClose:this.closePopup,open:s},i.a.createElement(W.a,{id:"responsive-dialog-title"},"Row Details"),i.a.createElement(V.a,null,i.a.createElement(q.a,null,n.map(function(e){return i.a.createElement("div",{key:e.name},i.a.createElement("strong",null,e.title),": ",l[e.name])}))))))))}}]),t}(n.Component),Qe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={},a.logout=a.logout.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"logout",value:function(){sessionStorage.clear()}},{key:"componentDidMount",value:function(){this.logout()}},{key:"render",value:function(){return i.a.createElement(o.a,{to:"/"})}}]),t}(n.Component),Ye=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={isCleared:!1},a.handleCleared=a.handleCleared.bind(Object(g.a)(Object(g.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleCleared",value:function(e){this.state.isCleared||this.setState({isCleared:!0})}},{key:"render",value:function(){var e=atob(this.props.match.params.title),t=atob(this.props.match.params.overlaySrc),a=atob(this.props.match.params.resultTitle),n=atob(this.props.match.params.resultSrc);return i.a.createElement("div",null,!this.state.isCleared&&i.a.createElement(Ae,{title:e,imgSrc:t,imgAlt:"card overlay image",imgWidth:300,imgHeight:300,handleCleared:this.handleCleared}),this.state.isCleared&&i.a.createElement(Ae,{title:a,imgSrc:n,imgAlt:"card result image",imgWidth:300,imgHeight:300,handleCleared:this.handleCleared}))}}]),t}(i.a.Component),Ke=function(){return i.a.createElement(l.a,null,i.a.createElement(o.d,null,i.a.createElement(o.b,{exact:!0,path:"/activecard/:title/:overlaySrc/:resultTitle/:resultSrc",component:Ye}),i.a.createElement(o.b,{exact:!0,path:"/login",component:_}),i.a.createElement(o.b,{exact:!0,path:"/logout",component:Qe}),i.a.createElement(w,{renderNav:!0},i.a.createElement(o.b,{exact:!0,path:"/",component:Ge}),i.a.createElement(o.b,{exact:!0,path:"/CreateCampaign",component:ee}),i.a.createElement(o.b,{exact:!0,path:"/DeleteCampaign",component:te}),i.a.createElement(o.b,{exact:!0,path:"/campaignview",component:We}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(353);s.a.render(i.a.createElement(Ke,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},54:function(e,t,a){},63:function(e,t,a){e.exports=a.p+"static/media/Rivallogo.4fc68847.png"},83:function(e,t,a){}},[[175,1,2]]]);
//# sourceMappingURL=main.01d886d7.chunk.js.map